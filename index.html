<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>AR Slides Test</title>
    <!-- A-Frame core -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
      body, html {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: #000;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      }
      .hint {
        position: fixed;
        left: 50%;
        bottom: 12px;
        transform: translateX(-50%);
        color: white;
        font-size: 13px;
        padding: 6px 10px;
        background: rgba(0,0,0,0.5);
        border-radius: 999px;
        z-index: 10;
        text-align: center;
        max-width: 90vw;
      }
    </style>
  </head>
  <body>
    <div class="hint" id="hint">
      Checking AR support…
    </div>

    <a-scene
      renderer="colorManagement: true; physicallyCorrectLights: true;"
      webxr="mode: ar; optionalFeatures: hit-test;"
      vr-mode-ui="enabled: false"
      xr-mode-ui="enabled: true"
      embedded
    >
      <!-- lights -->
      <a-entity light="type: ambient; intensity: 1.0; color: #ffffff"></a-entity>
      <a-entity
        light="type: directional; intensity: 0.6; color: #ffffff"
        position="0 2 1"
      ></a-entity>

      <!-- Slides -->
      <a-assets>
        <img id="slide1Image" src="1_The-Innovation-Soul-Line.png" crossorigin="anonymous" />
        <img id="slide2Image" src="2_Todays-Set-List.png" crossorigin="anonymous" />
        <img id="slide3Image" src="3_Check-In-Name-Your-Vibe.png" crossorigin="anonymous" />
      </a-assets>

      <a-plane
        id="slide1"
        src="1_The-Innovation-Soul-Line.png"
        position="-0.9 1.4 -2"
        width="1.3"
        height="0.75"
        material="transparent: true; roughness: 0.3; metalness: 0.1"
        animation="property: position; dir: alternate; dur: 4000; easing: easeInOutSine; loop: true; to: -0.9 1.5 -2"
      ></a-plane>

      <a-plane
        id="slide2"
        src="2_Todays-Set-List.png"
        position="0 1.2 -2.2"
        width="1.4"
        height="0.8"
        material="transparent: true; roughness: 0.3; metalness: 0.1"
        animation="property: position; dir: alternate; dur: 3800; easing: easeInOutSine; loop: true; to: 0 1.3 -2.2"
      ></a-plane>

      <a-plane
        id="slide3"
        src="3_Check-In-Name-Your-Vibe.png"
        position="0.9 1.4 -2"
        width="1.3"
        height="0.75"
        material="transparent: true; roughness: 0.3; metalness: 0.1"
        animation="property: position; dir: alternate; dur: 4200; easing: easeInOutSine; loop: true; to: 0.9 1.5 -2"
      ></a-plane>

      <a-entity camera look-controls></a-entity>
    </a-scene>

    <script>
      // Show clear hint depending on AR support
      (async function () {
        const hintEl = document.getElementById('hint');

        // 1) Must be HTTPS (or localhost)
        const isSecure =
          location.protocol === 'https:' || location.hostname === 'localhost';
        if (!isSecure) {
          hintEl.textContent =
            'AR needs HTTPS. Try this on a secure URL or localhost.';
          return;
        }

        // 2) Browser must support WebXR
        if (!('xr' in navigator)) {
          hintEl.textContent =
            'This browser does not support WebXR AR. Try Chrome on Android or Safari on iOS 17+.';
          return;
        }

        try {
          const supported = await navigator.xr.isSessionSupported('immersive-ar');
          if (!supported) {
            hintEl.textContent =
              'AR not supported on this device. Try on a newer phone with Chrome or Safari.';
            return;
          }
          // ✅ AR supported → A-Frame will show the "Enter AR" button
          hintEl.textContent = 'Tap the “Enter AR” button to start.';
        } catch (e) {
          console.error(e);
          hintEl.textContent =
            'Could not check AR support. Try on a mobile phone with Chrome/Safari.';
        }
      })();
    </script>
  </body>
</html>
